# =============================================================================
# NEWS AGGREGATOR - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# IMPORTANT: Never commit .env to version control!
# This file (.env.example) is safe to commit as it contains no real secrets.
#
# For Docker Compose: values here override docker-compose.yml defaults.
# For Production: use environment variables or secrets management.
# =============================================================================

# -----------------------------------------------------------------------------
# Docker / Infrastructure
# -----------------------------------------------------------------------------
# PostgreSQL credentials (used by docker-compose)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=news_aggregator

# Docker registry for production images (optional)
# DOCKER_REGISTRY=ghcr.io/your-org/
# IMAGE_TAG=latest

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP__NAME=news-aggregator
APP__VERSION=1.0.0
APP__ENVIRONMENT=development
# Set to true for detailed error responses (disable in production)
APP__DEBUG=true

# Secret key for session/token signing (CHANGE IN PRODUCTION!)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=change-me-in-production-use-secrets-token-urlsafe

# -----------------------------------------------------------------------------
# Server (Granian)
# -----------------------------------------------------------------------------
# Host and port for the API server
SERVER__HOST=0.0.0.0
SERVER__PORT=8000
# Number of workers (default: CPU cores)
SERVER__WORKERS=4
# Backlog size for connections
SERVER__BACKLOG=2048

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# For local development (outside Docker):
# DATABASE__URL=postgresql+psycopg://postgres:postgres@localhost:5432/news_aggregator
# For Docker Compose: URL is set in docker-compose.yml (uses container hostnames)
DATABASE__POOL_SIZE=10
DATABASE__ECHO=false

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
# For local development (outside Docker):
# REDIS__URL=redis://localhost:6379/0
# For Docker Compose: URL is set in docker-compose.yml
REDIS__MAX_CONNECTIONS=20
REDIS__CACHE_TTL_SECONDS=900
REDIS__LOCK_TTL_SECONDS=60

# -----------------------------------------------------------------------------
# Telegram Bot
# -----------------------------------------------------------------------------
# Get token from @BotFather on Telegram
TELEGRAM__TOKEN=
# Your Telegram user ID for admin notifications
TELEGRAM__ADMIN_ID=
# URL for Telegram Web App (must be HTTPS in production)
# Example: https://your-domain.com or https://your-app.pages.dev
TELEGRAM__WEB_APP_URL=

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOGGING__LEVEL=INFO
LOGGING__FORMAT="%(asctime)s | %(levelname)s | %(name)s | %(message)s"
LOGGING__DIRECTORY=logs
LOGGING__FILE_NAME=app.log
LOGGING__MAX_BYTES=5242880
LOGGING__BACKUP_COUNT=5

# -----------------------------------------------------------------------------
# ML / Classifier
# -----------------------------------------------------------------------------
ML__MODEL_PATH=models/news_classifier.pkl
ML__THRESHOLD=0.65

# -----------------------------------------------------------------------------
# Parsing / Aggregation
# -----------------------------------------------------------------------------
PARSING__INTERVAL_SECONDS=300
PARSING__MAX_ARTICLES_PER_SOURCE=100
PARSING__RETENTION_DAYS=30

# -----------------------------------------------------------------------------
# Migrations
# -----------------------------------------------------------------------------
# Set to true to run Alembic migrations on container startup
RUN_MIGRATIONS=true

# -----------------------------------------------------------------------------
# External API Keys (Optional)
# -----------------------------------------------------------------------------
# NewsAPI.org key for fetching news articles
# Get your key at: https://newsapi.org/register
NEWSAPI_KEY=

# Reddit API credentials (for Reddit parser)
# Create app at: https://www.reddit.com/prefs/apps
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=

# =============================================================================
# PRODUCTION DEPLOYMENT NOTES
# =============================================================================
# For production, consider using:
# - Railway/Render: Built-in secrets management
# - AWS: AWS Secrets Manager or Parameter Store
# - Kubernetes: K8s Secrets with sealed-secrets
# - HashiCorp Vault: For enterprise deployments
#
# Never expose real secrets in environment variables in CI/CD logs!
# =============================================================================
